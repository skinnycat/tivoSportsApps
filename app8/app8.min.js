"use strict";var SportsApp=function(){var e=457,n=73,a=new HelpPopup,d=(new Ticker,new Imenu,new StatsMenu),r=new Alerts,l=new VideoMenu,s=new Rtu,u=new Config,c=new QueryString,m=new DrawStats,M=new GenStats,p=(new RandomURLNum,function(){function e(){u.loadConfig(),s.loadRtu(!1),s.startRtu(),l.loadVideoMenu(),a.loadHelpText(),a.buildHelpPopup(),d.loadStatsMenu(!1,"TAB_MENU"),sportsAppModel.setCurrentFocus("videoMenu"),l.init(0),d.init();g()}sportsAppModel.setCurrentFocus("videoMenu"),e()}),g=function(){addEventListener("keydown",function(){if(48==event.keyCode)statsMenuModel.getStatsMenuSectionsData()&&d.closeStatsMenu(),sportsAppModel.setCurrentFocus("help"),a.showHelpPopup();else if(event.keyCode==e||event.keyCode==n){if(statsMenuModel.getStatsMenuStatus()){var t=sportsAppModel.getCurrentFocus();"help"!=t&&("statsMenu"!=t&&sportsAppModel.setCurrentFocus("statsMenu"),d.statsMenuController(event.keyCode))}}else switch(sportsAppModel.getCurrentFocus()){case"statsMenu":d.statsMenuController(event.keyCode);break;case"videoMenu":l.videoMenuController(event.keyCode);break;case"fullscreen":l.videoMenuController(event.keyCode);break;case"alerts":r.alertController(event.keyCode);break;case"help":a.helpController(event.keyCode);break;case"draw":m.drawController(event.keyCode);break;case"stats":M.statsController(event.keyCode)}})};vmDtvLib.dax.init("Sky Sports Formula 1 (app8)",version),sportsAppModel.setIsHD(c.ishd),p()},Rtu=function(){var e="rtu.json",t=new RandomURLNum,i=(new Alerts,new VideoMenu,new Ticker,this);i.rtuLoader=function(){i.jsonLoader()};var d=function(){var e=rtuModel.getRtuData();if(rtuModel.isFirstTime()&&(rtuModel.setVmDataVersion(e.vm),rtuModel.setImenuDataVersion(e.im),rtuModel.setAlertDataVersion(e.ad),rtuModel.setTickerDataVersion(e.td),rtuModel.isFirstTime(!1)),"1"===e.kl){console.log("kl:1 KILL APP");var t=new ChannelManager;t.exit()}if(rtuModel.getVmDataVersion()!=e.vm){var n=new VideoMenu;n.loadVideoMenu(!0),rtuModel.setVmDataVersion(e.vm),n=null}if(rtuModel.getImenuDataVersion()<e.im){var a=new StatsMenu,o=new Imenu;console.log("NEW STATS"),a.loadStatsMenu(!0,"TAB_MENU"),rtuModel.setImenuDataVersion(e.im),o=null}if(iMenuModel.getAlertStatus()){var i=new Alerts,d=rtuModel.getAlertDataVersion();d<e.ad&&(i.loadAlert(!0),rtuModel.setAlertDataVersion(e.ad)),i=null}if(rtuModel.getTickerDataVersion()<e.td){var r=new Ticker;r.loadTicker(),rtuModel.setTickerDataVersion(e.td),r=null}};i.loadRtu=function(n){var a=n?new AJAXjsonLoader:new SJAXjsonLoader,o=e+"?"+t.giveMeARandomNum();a.loadJSON(o,function(e){rtuModel.setRtuData(e);rtuModel.getRtuData();d()},function(t){vmDtvLib.dax.trackError(t,"JSON Load error "+e),console.error("JSON Load Error -> "+t)})},this.startRtu=function(){console.log("Starting RTU"),setInterval(function(){i.loadRtu(!0)},configModel.getPollTime())}},VideoMenu=function(){var d,e=this,t=0,n=0,a=0,o=4,i="videomenu.json",r="PRESS BACKUP TO EXIT TO VIDEO MENU",l="PRESS LEFT AND RIGHT ARROWS TO CHANGE AUDIO",s=new RandomURLNum;e.loadVideoMenu=function(e){var t=e?new AJAXjsonLoader:new SJAXjsonLoader;t.loadJSON(i+"?"+s.giveMeARandomNum(),function(e){videoMenuModel.setVideoMenuConfig(e)},function(e){vmDtvLib.dax.trackError(e,"JSON Load error "+i),console.error("JSON loader error: "+e+" "+i)})},e.showTarget=function(t,n,a,o,i){console.log("show Target x:"+t+" y:"+n+" w:"+a+" h:"+o+" bordercolour:"+i);var d=document.getElementById("target");if(videoMenuModel.targetVisible(!0),!(o>0&&a>0)){var l=new Imenu;return l.hideAudioIcon(),l.showMessageStrap(r,1e4,!0),e.hideTarget()}d.style.left=t+"px",d.style.top=n+"px",d.style.width=a+"px",d.style.height=o+"px",d.style.borderColor=i,d.style.visibility="visible"},e.hideTarget=function(){var e=document.getElementById("target");videoMenuModel.targetVisible(!1),e.style.visibility="hidden"};var u=function(e,t,n){var E,b,N,A,a=videoMenuModel.getVideoMenuConfig(),i=Number(a.videoMenu[e].matrix.option[n].x)-o,d=Number(a.videoMenu[e].matrix.option[n].y)-o,r=Number(a.videoMenu[e].matrix.option[t].x)-o,l=Number(a.videoMenu[e].matrix.option[t].y)-o,s=Number(a.videoMenu[e].matrix.option[n].h),u=Number(a.videoMenu[e].matrix.option[n].w),c=Number(a.videoMenu[e].matrix.option[t].h),m=Number(a.videoMenu[e].matrix.option[t].w),M=i>r?-1:1,v=d>l?-1:1,p=s>c?-1:1,g=u>m?-1:1,f=function(e,t){return Math.abs(e-t)},h=f(i,r),C=f(d,l),I=f(u,m),T=f(s,c),S="on"===iMenuModel.getTickerStatus()?2:1;h>C?(E=0===C?40*S:h/C*20*S,b=C/Math.ceil(h/E),A=T/Math.ceil((0===h?1:h)/E),N=I/Math.ceil((0===h?1:h)/E)):(b=0===h?40*S:C/h*20*S,E=h/Math.ceil(C/b),N=I/Math.ceil((0===C?1:C)/b),A=T/Math.ceil((0===C?1:C)/b));var x=document.getElementById("target"),y=0,w=setInterval(function(){var e=Math.abs(r-i),t=Math.abs(l-d),n=Math.abs(m-u),a=Math.abs(c-s);i!=r&&(i+=E>e?e*Number(M):E*Number(M)),d!=l&&(d+=b>t?t*Number(v):b*Number(v)),u!=m&&(u+=N>n?n*Number(g):N*Number(g)),s!=c&&(s+=A>a?a*Number(p):A*Number(p)),x.style.left=i+"px",x.style.top=d+"px",x.style.height=s+"px",x.style.width=u+"px",y++,i==r&&d==l&&u==m&&s==c&&(clearInterval(w),sportsAppModel.setKeyPressEnabled(!0))},20)};e.videoMenuController=function(){a=videoMenuModel.getOindex(),t=videoMenuModel.getVideoMenuIndex();var o,i=new ChannelManager,r=videoMenuModel.getVideoMenuConfig();if(sportsAppModel.getKeyPressEnabled()){var l=new Href,s=document.getElementById("debugArea");switch(s.innerHTML="",clearTimeout(d),event.keyCode){case 89:if(e.audioTextTimer,videoMenuModel.getMultiAudioFlag()){var c=document.getElementById("audioText");if(!c){c=document.createElement("div"),c.setAttribute("id","audioText");var m=document.getElementById("OSD");m.appendChild(c)}0===videoMenuModel.getMultiAudioToggle()?(console.log("Audio Tune to: "+r.ma[0].aid),i.audioTune(r.ma[0].aid,e.audCallBack()),videoMenuModel.setMultiAudioToggle(1),c.innerHTML="AUDIO: "+r.ma[0].lab,c.style.visibility="visible",clearTimeout(e.audioTextTimer),e.audioTextTimer=setTimeout(function(){c.style.visibility="hidden"},3e3)):(console.log("Audio Tune to: "+videoMenuModel.getCurrMenuAudio()),i.audioTune(videoMenuModel.getCurrMenuAudio(),e.audCallBack()),videoMenuModel.setMultiAudioToggle(0),c.innerHTML="AUDIO: MASTER",c.style.visibility="visible",clearTimeout(e.audioTextTimer),e.audioTextTimer=setTimeout(function(){c.style.visibility="hidden"},3e3))}break;case 405:videoMenuModel.getMultiAudioFlag()&&(0===videoMenuModel.getMultiAudioToggle()?(console.log("Audio Tune to: "+r.ma[0].aid),i.audioTune(r.ma[0].aid,e.audCallBack()),videoMenuModel.setMultiAudioToggle(1)):(console.log("Audio Tune to: "+videoMenuModel.getCurrMenuAudio()),i.audioTune(videoMenuModel.getCurrMenuAudio(),e.audCallBack()),videoMenuModel.setMultiAudioToggle(0)));break;case 38:"fullscreen"!==sportsAppModel.getCurrentFocus()&&(sportsAppModel.setKeyPressEnabled(!1),o="UP",n=videoMenuModel.getVideoMenuOptionNav(t,a,o),u(t,n,a),videoMenuModel.setOindex(n),d=setTimeout(function(){i.audioTune(Number(r.videoMenu[t].matrix.option[n].menuAudio),e.audCallBack())},1e3));break;case 40:"fullscreen"!==sportsAppModel.getCurrentFocus()&&(sportsAppModel.setKeyPressEnabled(!1),o="DOWN",n=videoMenuModel.getVideoMenuOptionNav(t,a,o),u(t,n,a),videoMenuModel.setOindex(n),d=setTimeout(function(){i.audioTune(Number(r.videoMenu[t].matrix.option[n].menuAudio),e.audCallBack())},1e3));break;case 39:"fullscreen"!==sportsAppModel.getCurrentFocus()&&(sportsAppModel.setKeyPressEnabled(!1),o="RIGHT",n=videoMenuModel.getVideoMenuOptionNav(t,a,o),u(t,n,a),videoMenuModel.setOindex(n),d=setTimeout(function(){i.audioTune(Number(r.videoMenu[t].matrix.option[n].menuAudio),e.audCallBack())},1e3));break;case 37:"fullscreen"!==sportsAppModel.getCurrentFocus()&&(sportsAppModel.setKeyPressEnabled(!1),o="LEFT",n=videoMenuModel.getVideoMenuOptionNav(t,a,o),u(t,n,a),videoMenuModel.setOindex(n),d=setTimeout(function(){i.audioTune(Number(r.videoMenu[t].matrix.option[a].menuAudio),e.audCallBack())},1e3));break;case 13:videoMenuModel.setMultiAudioFlag("true"===r.videoMenu[t].matrix.option[a].ma?!0:!1),l.hrefHandler(r.videoMenu[t].matrix.option[a].href);break;case 49:videoMenuModel.setMultiAudioFlag("true"===r.videoMenu[t].matrix.option[a].ma?!0:!1),videoMenuModel.setOindex(0),l.hrefHandler(r.videoMenu[t].matrix.option[0].href);break;case 50:videoMenuModel.setMultiAudioFlag("true"===r.videoMenu[t].matrix.option[a].ma?!0:!1),videoMenuModel.setOindex(1),l.hrefHandler(r.videoMenu[t].matrix.option[1].href);break;case 51:videoMenuModel.setMultiAudioFlag("true"===r.videoMenu[t].matrix.option[a].ma?!0:!1),videoMenuModel.setOindex(2),l.hrefHandler(r.videoMenu[t].matrix.option[2].href);break;case 52:videoMenuModel.setMultiAudioFlag("true"===r.videoMenu[t].matrix.option[a].ma?!0:!1),videoMenuModel.setOindex(3),l.hrefHandler(r.videoMenu[t].matrix.option[3].href);break;case 53:videoMenuModel.setMultiAudioFlag("true"===r.videoMenu[t].matrix.option[a].ma?!0:!1),videoMenuModel.setOindex(4),l.hrefHandler(r.videoMenu[t].matrix.option[4].href);break;case 54:videoMenuModel.setMultiAudioFlag("true"===r.videoMenu[t].matrix.option[a].ma?!0:!1),videoMenuModel.setOindex(5),l.hrefHandler(r.videoMenu[t].matrix.option[5].href);break;case 55:videoMenuModel.setMultiAudioFlag("true"===r.videoMenu[t].matrix.option[a].ma?!0:!1),videoMenuModel.setOindex(6),l.hrefHandler(r.videoMenu[t].matrix.option[6].href);break;case 56:videoMenuModel.setMultiAudioFlag("true"===r.videoMenu[t].matrix.option[a].ma?!0:!1),videoMenuModel.setOindex(7),l.hrefHandler(r.videoMenu[t].matrix.option[7].href);break;case 57:videoMenuModel.setMultiAudioFlag("true"===r.videoMenu[t].matrix.option[a].ma?!0:!1),videoMenuModel.setOindex(8),l.hrefHandler(r.videoMenu[t].matrix.option[8].href);break;case 66:console.log("You have pressed BACKUP");var M=new Av,v=channelManagerModel.getChannelID();if(iMenuModel.getImenuStatus()){var p=new Imenu;p.hideMessageStrap()}var s=document.getElementById("debugArea");s.innerHTML=s.innerHTML+"channel ID: "+v+"    vchanId: "+M.videoStreams[v],"fullscreen"===sportsAppModel.getCurrentFocus()?e.init(0):function(){console.log("Is the video menu index > 0?"),videoMenuModel.getVideoMenuIndex()>0?(console.log("Video Menu Index: "+videoMenuModel.getVideoMenuIndex()),videoMenuModel.setOindex(0),e.init(0)):(console.log("Video Menu Index: "+videoMenuModel.getVideoMenuIndex()),console.log("Show the splash because we are about exit the application"),splashLoader.show(),console.log("Calling tivo.core.exit();"),tivo.core.exit())}(),M=null;break;case 27:console.log("You have pressed BACKUP");var M=new Av,v=channelManagerModel.getChannelID();if(iMenuModel.getImenuStatus()){var p=new Imenu;p.hideMessageStrap()}var s=document.getElementById("debugArea");s.innerHTML=s.innerHTML+"channel ID: "+v+"    vchanId: "+M.videoStreams[v],"fullscreen"===sportsAppModel.getCurrentFocus()?e.init(0):function(){console.log("Is the video menu index > 0?"),videoMenuModel.getVideoMenuIndex()>0?(console.log("Video Menu Index: "+videoMenuModel.getVideoMenuIndex()),videoMenuModel.setOindex(0),e.init(0)):(console.log("Video Menu Index: "+videoMenuModel.getVideoMenuIndex()),console.log("Show the splash because we are about exit the application"),splashLoader.show(),console.log("Calling tivo.core.exit();"),tivo.core.exit())}(),M=null}}},e.fullScreen=function(t,n){console.log("Fullscreen"),e.hideTarget(),console.log("IMENU STATUS IN FULLSCREEN: "+iMenuModel.getImenuStatus());var a=new Imenu;iMenuModel.getImenuStatus()?(console.log("IMENU SHOW AUDIO "+videoMenuModel.getMultiAudioFlag()),videoMenuModel.getMultiAudioFlag()?(a.showAudioIcon(),a.showMessageStrap(l,5e3,!1)):a.showMessageStrap(r,5e3,!0)):a.showMessageStrap(r,5e3,!1),sportsAppModel.setCurrentFocus("fullscreen"),channelManagerModel.setCurrentChannel(t),channelManagerModel.setCurrentAudio(n),channelManager.channelTune(t,e.vidCallBack),a=null},e.vidCallBack=function(){console.log("calling hide loading animation"),hideLoadingAnim();var t=document.getElementById("debugArea");t.innerHTML=t.innerHTML+"VIDEO TUNED ",channelManager.audioTune(Number(channelManagerModel.getCurrentAudio()),e.audCallBack),splashLoader.hide()},e.audCallBack=function(){var e=document.getElementById("debugArea");e.innerHTML+="  ... TUNED"},e.init=function(n){var i=document.getElementById("debugArea");i.innerHTML="INIT",t=0/0!==n&&void 0!==n?n:0,videoMenuModel.setVideoMenuIndex(t),a=videoMenuModel.getOindex();var d=videoMenuModel.getVideoMenuConfig(),r=document.getElementById("vidBroadcast");r.style.visibility="visible";var l=d.videoMenu[t].matrix.video,s=d.videoMenu[t].matrix.option[a].menuAudio;channelManagerModel.setCurrentChannel(l),channelManagerModel.setCurrentAudio(s);var i=document.getElementById("debugArea");channelManager.channelTune(l,e.vidCallBack);var u="#"+d.videoMenu[t].matrix.rgb.slice(2,8),c=document.getElementById("target"),m=document.getElementById("OSD");if(c||(c=document.createElement("div"),c.setAttribute("id","target"),c.style.zIndex="1",m.appendChild(c)),iMenuModel.getImenuStatus()){var M=new Imenu;M.hideAudioIcon(),M=null,console.log("SET AUDIO FLAG TO FALSE"),videoMenuModel.setMultiAudioFlag(!1),videoMenuModel.setCurrMultiAudio(0)}var v=d.videoMenu[t].matrix.option[a].x,p=d.videoMenu[t].matrix.option[a].y,g=d.videoMenu[t].matrix.option[a].w-o,f=d.videoMenu[t].matrix.option[a].h-o;e.showTarget(v,p,g,f,u),console.log("Setting the current focus to videoMenu"),sportsAppModel.setCurrentFocus("videoMenu"),console.log("INIT current Focus: "+sportsAppModel.getCurrentFocus())}},StatsMenu=function(){var e=this,n=new RandomURLNum;e.buildMenu=function(e){var t=document.getElementById("OSD"),n=document.getElementById("statsMenuContainer"),o=document.createElement("div"),i=document.createElement("div"),d=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div"),c=(document.createElement("div"),document.createElement("div"),document.createElement("div")),m=document.createElement("div"),M=statsMenuModel.getStatsMenuConfig(e),v="PRESS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TO CLOSE",p="SKY RACE CONTROL";statsMenuModel.setItemIndex(0),statsMenuModel.setCurrentStatsMenu(e);var g=statsMenuModel.getStatsMenuData(e);if(console.log("TAB: "+e),console.log("STATS MENU DATA TO BUILD : "+g),n)for(;n.firstChild;)n.removeChild(n.firstChild);else n=document.createElement("div"),n.id="statsMenuContainer",n.className="closed";i.id="statsHeader",r.id="statsHeader_Text",r.innerHTML=v,i.appendChild(r),l.id="statsHeader_Title",c.id="statsHeader_Title_Text",c.appendChild(document.createTextNode(M.name)),l.appendChild(c),i.appendChild(l),n.appendChild(i),o.id="statsContainer",n.appendChild(o),d.id="statsFooter",m.id="statsFooter_Text",m.appendChild(document.createTextNode(p)),d.appendChild(m),n.appendChild(d),t.appendChild(n),a(e)};var a=function(e){var n=(document.getElementById("statsMenuContainer"),document.getElementById("statsContainer")),a=document.getElementById("extraTitle"),i=statsMenuModel.getStatsMenuData(e),d=statsMenuModel.getStatsOptionSelected();for(console.log("Menu Data: "+i),statsMenuModel.setCurrentStatsMenu(e),a&&a.parentNode.removeChild(a);n.firstChild;)n.removeChild(n.firstChild);switch(e){case"TAB_MENU":for(var r=0,l=document.createElement("UL"),s=0;s<i.sections.length;s++){var u=i.sections[s].type;if(statsMenuModel.menuTypeAllowed(u)){var c=document.createElement("li");c.className=s===statsMenuModel.getItemIndex()?"statsMainMenu listItem selected":"statsMainMenu listItem",c.appendChild(document.createTextNode(i.sections[s].name)),l.appendChild(c),r++}}statsMenuModel.setNumOfListItems(r),n.appendChild(l);break;case"TAB_NEWS":if(d){var m=document.getElementById("extraTitle"),n=document.getElementById("statsContainer"),M=document.getElementById("statsHeader_Text"),v=document.getElementById("statsHeader_Title"),g=(statsMenuModel.getMenuIndex(),statsMenuModel.getItemIndex());m||(m=document.createElement("div"),m.id="extraTitle",m.innerHTML="NEWS",o(M,m)),v.innerHTML=i.items[g].headline,n.className="statsScroller",n.innerHTML=n2br(i.items[g].body)}else{var r=0,l=document.createElement("ul");n.className="",document.getElementById("statsHeader_Title").innerHTML=i.title;for(var s=0;s<i.items.length;s++){var c=document.createElement("li");c.className=s===statsMenuModel.getItemIndex()?"statsNewsMenu listItem selected":"statsNewsMenu listItem",c.appendChild(document.createTextNode(i.items[s].shorttitle)),l.appendChild(c),r++}statsMenuModel.setNumOfListItems(r),n.appendChild(l)}break;case"TAB_GRID":var C,I,T,f=document.getElementById("statsHeader"),h=document.getElementById("gridTopRow"),g=statsMenuModel.getItemIndex(),S=statsMenuModel.getPageIndex(),E=statsMenuModel.getMaxRows(),b=i.grid.length,N=S*E,A=b-N,x=A>E?E:A;statsMenuModel.setNumberOfPages(Math.floor((b+E-1)/E)),statsMenuModel.setNumOfListItems(b,x),h||(h=document.createElement("div"),C=document.createElement("div"),I=document.createElement("div"),T=document.createElement("div"),h.id="gridTopRow",C.className="posColumn",I.className="nameColumn",T.className="teamColumn",I.innerHTML="NAME",T.innerHTML="TEAM",h.appendChild(C),h.appendChild(I),h.appendChild(T),o(f,h));for(var l=document.createElement("ul"),s=0;s<statsMenuModel.getNumOfListItems();s++){var c=document.createElement("li");c.className="gridRow",C=document.createElement("div"),I=document.createElement("div"),T=document.createElement("div"),C.className="posColumn",I.className="nameColumn",T.className="teamColumn",C.innerHTML=i.grid[s+N].position,I.innerHTML=i.grid[s+N].name,T.innerHTML=i.grid[s+N].team,c.appendChild(C),c.appendChild(I),c.appendChild(T),n.appendChild(c)}break;case"TAB_QUALIFYING":if(console.log("TAB_QUALIFYING: optionSelected: "+d),d){var C,I,T,L,w=document.getElementById("extraTitle"),n=document.getElementById("statsContainer"),f=document.getElementById("statsHeader"),M=document.getElementById("statsHeader_Text"),v=document.getElementById("statsHeader_Title"),g=(statsMenuModel.getMenuIndex(),statsMenuModel.getItemIndex()),S=statsMenuModel.getPageIndex(),y=document.getElementById("qualiTopRow"),E=statsMenuModel.getMaxRows(),B=i.sessions[g].times.length,N=S*E,A=B-N,x=A>E?E:A;w||(w=document.createElement("div"),w.id="extraTitle",w.innerHTML=i.title,o(M,w)),console.log("+++CurrItem: "+g),v.innerHTML=i.menu[g].title,statsMenuModel.setNumberOfPages(Math.floor((B+E-1)/E)),statsMenuModel.setNumOfListItems(B,x),y||(y=document.createElement("div"),C=document.createElement("div"),I=document.createElement("div"),T=document.createElement("div"),L=document.createElement("div"),y.id="qualiTopRow",C.className="posColumn",I.className="nameColumn",T.className="teamColumn",L.className="timeColumn",I.innerHTML="NAME",T.innerHTML="TEAM",L.innerHTML="TIME",y.appendChild(C),y.appendChild(I),y.appendChild(T),y.appendChild(L),o(f,y));for(var l=document.createElement("ul"),s=0;s<statsMenuModel.getNumOfListItems();s++){var c=document.createElement("li");c.className="qualiRow",C=document.createElement("div"),I=document.createElement("div"),T=document.createElement("div"),L=document.createElement("div"),C.className="posColumn",I.className="nameColumn",T.className="teamColumn",L.className="timeColumn",C.innerHTML=i.sessions[g].times[s+N].pos,I.innerHTML=i.sessions[g].times[s+N].name,T.innerHTML=i.sessions[g].times[s+N].team,L.innerHTML=i.sessions[g].times[s+N].time,c.appendChild(C),c.appendChild(I),c.appendChild(T),c.appendChild(L),n.appendChild(c),i.sessions[g].dz==s+1+N&&(c.style.borderBottom="medium solid #fff")}}else{var r=0,l=document.createElement("ul"),y=document.getElementById("qualiTopRow");y&&y.parentNode.removeChild(y),document.getElementById("statsHeader_Title").innerHTML=i.title;for(var s=0;s<i.menu.length;s++){var c=document.createElement("li");c.className=s===statsMenuModel.getItemIndex()?"statsQualifyingMenu listItem selected":"statsQualifyingMenu listItem",c.appendChild(document.createTextNode(i.menu[s].title)),l.appendChild(c),r++}statsMenuModel.setNumOfListItems(r),n.appendChild(l)}break;case"TAB_PRACTICE":if(console.log("TAB_PRACTICE optionSelected: "+d),d){var C,I,O,L,R=document.getElementById("extraTitle"),n=document.getElementById("statsContainer"),f=document.getElementById("statsHeader"),M=document.getElementById("statsHeader_Text"),v=document.getElementById("statsHeader_Title"),g=(statsMenuModel.getMenuIndex(),statsMenuModel.getItemIndex()),S=statsMenuModel.getPageIndex(),k=document.getElementById("practiceTopRow"),E=statsMenuModel.getMaxRows(),B=i.sessions[g].times.length,N=S*E,A=B-N,x=A>E?E:A;R||(R=document.createElement("div"),R.id="extraTitle",R.innerHTML=i.title,o(M,R)),v.innerHTML=i.menu[g].title,statsMenuModel.setNumberOfPages(Math.floor((B+E-1)/E)),statsMenuModel.setNumOfListItems(B,x),k||(k=document.createElement("div"),C=document.createElement("div"),I=document.createElement("div"),L=document.createElement("div"),O=document.createElement("div"),k.id="practiceTopRow",C.className="posColumn",I.className="nameColumn",L.className="timeColumn",O.className="lapsColumn",I.innerHTML="NAME",L.innerHTML="TIME",O.innerHTML="LAPS",k.appendChild(C),k.appendChild(I),k.appendChild(L),k.appendChild(O),o(f,k));for(var l=document.createElement("ul"),s=0;s<statsMenuModel.getNumOfListItems();s++){var c=document.createElement("li");c.className="practiceRow",C=document.createElement("div"),I=document.createElement("div"),L=document.createElement("div"),O=document.createElement("div"),C.className="posColumn",I.className="nameColumn",L.className="timeColumn",O.className="lapsColumn",C.innerHTML=i.sessions[g].times[s+N].pos,I.innerHTML=i.sessions[g].times[s+N].name,L.innerHTML=i.sessions[g].times[s+N].time,O.innerHTML=i.sessions[g].times[s+N].laps,c.appendChild(C),c.appendChild(I),c.appendChild(L),c.appendChild(O),n.appendChild(c)}}else{var r=0,l=document.createElement("ul"),k=document.getElementById("practiceTopRow");k&&k.parentNode.removeChild(k),document.getElementById("statsHeader_Title").innerHTML=i.title;for(var s=0;s<i.menu.length;s++){var c=document.createElement("li");c.className=s===statsMenuModel.getItemIndex()?"statsPracticeMenu listItem selected":"statsPracticeMenu listItem",c.appendChild(document.createTextNode(i.menu[s].title)),l.appendChild(c),r++}statsMenuModel.setNumOfListItems(r),n.appendChild(l)}break;case"TAB_DRIVERSTANDINGS":var H,I,T,P,f=document.getElementById("statsHeader"),D=document.getElementById("standingsTopRow"),g=statsMenuModel.getItemIndex(),E=statsMenuModel.getMaxRows(),S=statsMenuModel.getPageIndex(),F=i.ds.length,N=S*E,A=F-N,x=A>E?E:A;statsMenuModel.setNumberOfPages(Math.floor((F+E-1)/E)),statsMenuModel.setNumOfListItems(F,x),console.log("-----> STANDINGS LENGTH: "+F),D||(D=document.createElement("div"),H=document.createElement("div"),I=document.createElement("div"),T=document.createElement("div"),P=document.createElement("div"),D.id="standingsTopRow",H.className="rankColumn",I.className="nameColumn",T.className="teamColumn",P.className="pointsColumn",I.innerHTML="NAME",T.innerHTML="TEAM",P.innerHTML="PTS",D.appendChild(H),D.appendChild(I),D.appendChild(T),D.appendChild(P),o(f,D));for(var l=document.createElement("ul"),s=0;s<statsMenuModel.getNumOfListItems();s++){var c=document.createElement("li");c.className="standingsRow",H=document.createElement("div"),I=document.createElement("div"),T=document.createElement("div"),P=document.createElement("div"),H.className="rankColumn",I.className="nameColumn",T.className="teamColumn",P.className="pointsColumn",H.innerHTML=i.ds[s+N].rank,I.innerHTML=i.ds[s+N].name,T.innerHTML=i.ds[s+N].team,P.innerHTML=i.ds[s+N].pts,c.appendChild(H),c.appendChild(I),c.appendChild(T),c.appendChild(P),n.appendChild(c)}break;case"TAB_CONSTRUCTORSTANDINGS":var H,T,P,f=document.getElementById("statsHeader"),D=document.getElementById("standingsTopRow"),g=statsMenuModel.getItemIndex(),S=statsMenuModel.getPageIndex(),E=statsMenuModel.getMaxRows(),F=i.cs.length,N=S*E,A=F-N,x=A>E?E:A;statsMenuModel.setNumberOfPages(Math.floor((F+E-1)/E)),statsMenuModel.setNumOfListItems(F,x),D||(D=document.createElement("div"),H=document.createElement("div"),T=document.createElement("div"),P=document.createElement("div"),D.id="standingsTopRow",H.className="rankColumn",T.className="constructorsTeamColumn",P.className="pointsColumn",T.innerHTML="TEAM",P.innerHTML="PTS",D.appendChild(H),D.appendChild(T),D.appendChild(P),o(f,D));for(var l=document.createElement("ul"),s=0;s<statsMenuModel.getNumOfListItems();s++){var c=document.createElement("li");c.className="standingsRow",H=document.createElement("div"),T=document.createElement("div"),P=document.createElement("div"),H.className="rankColumn",T.className="constructorsTeamColumn",P.className="pointsColumn",H.innerHTML=i.cs[s+N].rank,T.innerHTML=i.cs[s+N].team,P.innerHTML=i.cs[s+N].pts,c.appendChild(H),c.appendChild(T),c.appendChild(P),n.appendChild(c)}}};e.statsMenuController=function(t){var n=statsMenuModel.getCurrentStatsMenu(),i=(statsMenuModel.getStatsMenuData(n),statsMenuModel.getItemIndex()),d=statsMenuModel.getPageIndex(),r=statsMenuModel.getStatsOptionSelected(),l=statsMenuModel.getNumOfListItems()-1;if(sportsAppModel.getKeyPressEnabled())switch(t){case 38:if(console.log("UP PRESSED "+n),r){if("TAB_NEWS"===n){var u=document.getElementById("statsContainer");u.scrollTop-=50;break}("TAB_QUALIFYING"===n||"TAB_PRACTICE"===n)&&d>0&&(d--,console.log("CURRITEM: "+i+"   numOfListItems: "+l),statsMenuModel.setPageIndex(d),a(n))}else if("TAB_MENU"===n||"TAB_NEWS"===n||"TAB_QUALIFYING"===n||"TAB_PRACTICE"===n){if(i>0){i--,console.log("CURRITEM: "+i+"   numOfListItems: "+l),statsMenuModel.setItemIndex(i);var s=document.querySelectorAll(".listItem");s[i+1].classList.remove("selected"),s[i].classList.add("selected")}}else("TAB_GRID"===n||"TAB_DRIVERSTANDINGS"===n||"TAB_CONSTRUCTORSTANDINGS"===n)&&(console.log("GRID MENU UP"),d>0&&(d--,console.log("CURRITEM: "+i+"   numOfListItems: "+l),statsMenuModel.setPageIndex(d),a(n)));break;case 40:if(console.log("DOWN PRESSED "+n),r){if("TAB_NEWS"===n){var u=document.getElementById("statsContainer");u.scrollTop+=50;break}("TAB_QUALIFYING"===n||"TAB_PRACTICE"===n)&&d<statsMenuModel.getNumberOfPages()-1&&(d++,console.log("CURRITEM: "+i+"   numOfListItems: "+l),statsMenuModel.setPageIndex(d),a(n))}else if("TAB_MENU"===n||"TAB_NEWS"===n||"TAB_QUALIFYING"===n||"TAB_PRACTICE"===n){if(l>i){i++,statsMenuModel.setItemIndex(i);var s=document.querySelectorAll(".listItem");s[i-1].classList.remove("selected"),s[i].classList.add("selected"),console.log("CURRITEM: "+i+"   numOfListItems: "+l)}}else("TAB_GRID"===n||"TAB_DRIVERSTANDINGS"===n||"TAB_CONSTRUCTORSTANDINGS"===n)&&(console.log(n+" MENU DOWN"),console.log(d+" : "+(statsMenuModel.getNumberOfPages()-1)),d<statsMenuModel.getNumberOfPages()-1&&(d++,console.log(n+"....CURRITEM: "+i+"   numOfListItems: "+l),statsMenuModel.setPageIndex(d),a(n)));break;case 39:if(console.log("RIGHT PRESSED "),statsMenuModel.setPageIndex(0),r)console.log("currItem: "+i+"  numOfListItems: "+l),"TAB_NEWS"===n?(l>i?i++:i=0,statsMenuModel.setPageIndex(0),statsMenuModel.setItemIndex(i),a(n)):("TAB_PRACTICE"===n||"TAB_QUALIFYING"===n)&&(i<statsMenuModel.getNumOfParentListItems()?i++:i=0,statsMenuModel.setItemIndex(i),a(n));else{var c=statsMenuModel.getMenuIndex(),m=statsMenuModel.getStatsMenuSectionsData();console.log("menuIndex: "+c),console.log("menuData.length: "+m.length),c<m.length-1?("TAB_MENU"===n?c=0:c++,statsMenuModel.setMenuIndex(c),e.buildMenu(m[c].type)):1===m.length&&"TAB_MENU"===n?(c=0,statsMenuModel.setMenuIndex(c),e.buildMenu(m[c].type)):(c=0,statsMenuModel.setMenuIndex(c),e.buildMenu("TAB_MENU"))}break;case 37:if(statsMenuModel.setPageIndex(0),console.log("LEFT PRESSED"),r)console.log("currItem: "+i+"  numOfListItems: "+l),"TAB_NEWS"===n?(i>0?i--:i=l,statsMenuModel.setPageIndex(0),statsMenuModel.setItemIndex(i),a(n)):("TAB_PRACTICE"===n||"TAB_QUALIFYING"===n)&&(i>0?i--:i=statsMenuModel.getNumOfParentListItems(),console.log("numOfListItems: "+l+">>>>>>>>>>>>>>>>>>> currItem: "+i),statsMenuModel.setItemIndex(i),a(n));else{console.log("OPTION NOT SELECTED");var c=statsMenuModel.getMenuIndex(),m=statsMenuModel.getStatsMenuSectionsData();console.log("MENU INDEX: "+c),c>0?(c--,statsMenuModel.setMenuIndex(c),e.buildMenu(m[c].type)):"TAB_MENU"===n?(c=m.length-1,statsMenuModel.setMenuIndex(c),e.buildMenu(m[c].type)):0===c&&(console.log("if 3"),e.buildMenu("TAB_MENU"))}break;case 13:console.log("ENTER PRESSED");var M,v=statsMenuModel.getStatsMenuData(n);switch(statsMenuModel.setPageIndex(0),n){case"TAB_MENU":M=v.sections[i].type,e.buildMenu(M);break;case"TAB_NEWS":case"TAB_QUALIFYING":case"TAB_PRACTICE":r||(statsMenuModel.setNumOfParentListItems(l),statsMenuModel.setStatsOptionSelected(!0),statsMenuModel.setPageIndex(0),a(n))}break;case 73:case 457:e.openCloseStatsMenu(),sportsAppModel.setKeyPressEnabled(!0);break;case 66:case 27:case 8:r?(statsMenuModel.setStatsOptionSelected(!1),statsMenuModel.setItemIndex(0),a(n)):"TAB_MENU"===n?e.openCloseStatsMenu():(console.log("BUILD THE TAB MENU"),statsMenuModel.setItemIndex(0),e.buildMenu("TAB_MENU"));break;case 403:case 82:var p=new VideoMenu;e.openCloseStatsMenu(),p.init(0)}},e.openCloseStatsMenu=function(){var e=document.getElementById("statsMenuContainer");e.classList.contains("open")?(e.classList.remove("open"),e.classList.add("closed"),sportsAppModel.setCurrentFocus(sportsAppModel.getLastFocus())):(statsMenuModel.setItemIndex(0),statsMenuModel.breadcrum=[],a("TAB_MENU"),e.classList.remove("closed"),e.classList.add("open"))},e.closeStatsMenu=function(){statsMenuContainer.classList.contains("open")&&(statsMenuContainer.classList.remove("open"),statsMenuContainer.classList.add("closed"),sportsAppModel.setCurrentFocus(sportsAppModel.getLastFocus()))},e.loadStatsMenu=function(t,a){var o=t?new AJAXjsonLoader:new SJAXjsonLoader,i=statsMenuModel.getStatsMenuConfig(a);o.loadJSON(i.statsURL+"?"+n.giveMeARandomNum(),function(n){statsMenuModel.setStatsMenuData(n,a),t&&e.init()},function(e){vmDtvLib.dax.trackError(e,"JSON Load error - Setting Stats Menu Status to False. Red button is now disabled"),console.error("JSON Load error -> "+e+" Setting Stats Menu Status to False. Red button is now disabled"),statsMenuModel.setStatsMenuStatus(!1)})},e.init=function(){if(statsMenuModel.menuAvailable()){var t=statsMenuModel.getStatsMenuSectionsData();console.log("STATS MENU AVAILABLE"),statsMenuModel.setStatsMenuStatus(!0);for(var n=0;n<t.length;n++){var a=t[n].type;statsMenuModel.menuTypeAllowed(a)&&(console.log("LOADING.. "+a),e.loadStatsMenu(!1,a))}statsMenuModel.stripMenuData(),e.buildMenu("TAB_MENU")}else statsMenuModel.setStatsMenuStatus(!1)};var o=function(e,t){e.parentNode.insertBefore(t,e.nextSibling)}},allowedStatsList=function(e){return{TAB_MENU:!0,TAB_NEWS:!0,TAB_GRID:!0,TAB_QUALIFYING:!0,TAB_PRACTICE:!0,TAB_DRIVERSTANDINGS:!0}[e]},StatsMenuModel=function(){var r,l,u,c,e={menu:{}},t={types:{TAB_MENU:{name:"MENU",statsURL:"stats/sections.json"},TAB_NEWS:{name:"NEWS",statsURL:"stats/newslist.json"},TAB_GRID:{name:"GRID",statsURL:"stats/grid.json"},TAB_QUALIFYING:{name:"QUALIFYING TIMES",statsURL:"stats/qualifyingtimes.json"},TAB_PRACTICE:{name:"PRACTICE TIMES",statsURL:"stats/practicetimes.json"},TAB_DRIVERSTANDINGS:{name:"DRIVERS' STANDINGS",statsURL:"stats/driverstandings.json"},TAB_CONSTRUCTORSTANDINGS:{name:"CONSTRUCTORS' STANDINGS",statsURL:"stats/constructorstandings.json"},TAB_HELP:{name:"HELP",statsURL:""}}},a=0,o="",d=0,s=10,m=!1,v=!1,g=this;g.breadcrum=[],g.getData=function(){return e},g.setStatsMenuData=function(t,n){e.menu[n]=t},g.stripMenuData=function(){var t=0;for(console.log(e.menu.TAB_MENU.sections.length);t<e.menu.TAB_MENU.sections.length;)console.log(t),console.log(e.menu.TAB_MENU.sections.length),g.menuTypeAllowed(e.menu.TAB_MENU.sections[t].type)?t++:(console.log("Before: "+e.menu.TAB_MENU.sections[t].type),e.menu.TAB_MENU.sections.splice(t,1))},g.getStatsMenuData=function(t){return e.menu[t]},g.setCurrentStatsMenu=function(e){o=e},g.getCurrentStatsMenu=function(){return o},g.menuAvailable=function(){return e.menu.hasOwnProperty("TAB_MENU")},g.getStatsMenuSectionsData=function(){return e.menu.TAB_MENU.sections
},g.getStatsMenuConfig=function(e){return t.types[e]},g.getBreadcrumLength=function(){return breadcrum.length},g.pushBreadcrum=function(e){g.breadcrum.push(e)},g.popBreadcrum=function(){g.breadcrum.pop()},g.getStatsMenuStatus=function(){return v},g.setStatsMenuStatus=function(e){v=e},g.setMenuIndex=function(e){a=e},g.setItemIndex=function(e){d=e},g.setNumOfListItems=function(e,t){null==t?r=e:(console.log("maxNumOfItems: "+t+" numOfItems: "+e),r=t>=e?e:t,console.log("numOfListItems: "+r))},g.setNumOfParentListItems=function(e){l=e},g.getNumOfParentListItems=function(){return l},g.setNumberOfPages=function(e){u=e},g.getNumberOfPages=function(){return u},g.setMenuIndex=function(e){a=e},g.getStatsMenuIndex=function(){return a},g.getItemIndex=function(){return d},g.getMenuIndex=function(){return a},g.getNumOfListItems=function(){return r},g.getMaxRows=function(){return s},g.setStatsOptionSelected=function(e){m=e},g.getStatsOptionSelected=function(){return m},g.setPageIndex=function(e){c=e},g.getPageIndex=function(){return c},g.menuTypeAllowed=function(e){return t.types.hasOwnProperty(e)&&"TAB_HELP"!==e}};